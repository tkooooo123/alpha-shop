{"version":3,"sources":["webpack:///./src/views/Product.vue","webpack:///src/views/Product.vue","webpack:///./src/views/Product.vue?e622","webpack:///./src/views/Product.vue?f436","webpack:///./src/views/Product.vue?1f49"],"names":["render","_vm","this","_c","_self","staticClass","isLoading","attrs","product","image","isProcessing","clickProductId","id","_e","_v","_s","name","price","description","on","$event","preventDefault","stopPropagation","handleSubmit","apply","arguments","subQuantity","directives","rawName","value","itemQuantity","expression","quantity","domProps","changeQuantity","target","composing","cartId","addQuantity","_m","products","length","_l","key","params","Category","addToCart","staticRenderFns","components","Spinner","ProcessSpinner","data","created","productId","beforeRouteUpdate","$","scrollTop","next","methods","Toast","icon","title","page","categoryId","console","cart","localStorage","computed","component"],"mappings":"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WAAWX,EAAG,KAAK,CAACE,YAAY,aAAa,CAACF,EAAG,KAAK,CAACE,YAAY,QAAQ,CAACJ,EAAIa,GAAG,8BAA8BX,EAAG,KAAK,CAACE,YAAY,QAAQ,CAACJ,EAAIa,GAAG,wE,yGC6F/rB,GACfkC,YACAC,eACAC,uBAEAC,OACA,OACA3C,WACAgC,YACA7B,kBACA0B,UACAP,eACAxB,aACAI,kBAGA0C,UACA,MAAAxC,MAAA,mBACA,2CACA,mBAAAyC,eAEAC,yBACA,kBACA,SAAA1C,GAAA,SACA,mBAAAyC,cACAE,2BACAC,aACA,KAEAC,KAEAC,SACA,8BAAAL,IACA,IACA,iCAAAA,eACA,KAAAF,GAAA,EACA,sBACA,2BAEA,cAAA3C,GAAA,EACA,qBACA,mBACA,kBACA,SACA,kBACAmD,aACAC,aACAC,2BAIA,oBACA,IACA,kCACAC,QACAC,qCAEA,gEACA,gBACA,SACAC,iBAGA1B,cACA,yCACA,qBAGAZ,cACA,wCACA,wCACA,qBACA,qBAGAQ,mBACA,0CACA,sBAGA,qBACA,IACA,oCACA,qBACA,+BACAmB,0BACArB,2BACAK,sBAEA,KAAAc,GAAA,EAIA,GAHA,8BACAc,cAEA,mBACA,2BAEA,eACAC,2CACA,qBACA,SACA,sBACA,yBACAP,aACAC,aACAC,0BAGAF,aACAC,aACAC,0BAMA,gBACA,IACA,gCACA,KAAAV,GAAA,EACA,sBACA,2BAEA,8BACAc,eAEA,SACAD,iBAGA,mBACA,IACA,sBACA,qBAEA,+BACAX,YACArB,WACAK,sBAEA,KAAAc,GAAA,EAUA,GATA,8BACAc,cAEA,gBACAN,aACAC,eACAC,kBAGA,mBACA,iCAEA,eACA,qBACA,SACA,qBACAF,aACAC,aACAC,2BAKAM,aACA,oDCnQiV,I,wBCQ7UC,EAAY,eACd,EACApE,EACA+C,GACA,EACA,KACA,KACA,MAIa,aAAAqB,E,2CCnBf","file":"js/chunk-a0931d9e.3ba76224.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"product-container\"},[_c('div',{staticClass:\"product-wrapper container\"},[(_vm.isLoading === true)?_c('Spinner'):_c('div',{staticClass:\"product-detail pt-5\"},[_c('div',{staticClass:\"product-img\"},[_c('img',{attrs:{\"src\":_vm.product.image,\"alt\":\"\"}})]),_c('div',{staticClass:\"product-info\"},[(_vm.isProcessing === true && _vm.clickProductId === _vm.product.id)?_c('ProcessSpinner'):_vm._e(),_c('div',{staticClass:\"product-name\"},[_vm._v(_vm._s(_vm.product.name))]),_c('div',{staticClass:\"product-price\"},[_vm._v(\"NT$ \"+_vm._s(_vm.product.price))]),_c('span',{staticClass:\"line\"}),_c('div',{staticClass:\"product-description\"},[_vm._v(\" \"+_vm._s(_vm.product.description)+\" \")]),_c('span',{staticClass:\"line\"}),_c('form',{on:{\"submit\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.handleSubmit.apply(null, arguments)}}},[_c('div',{staticClass:\"product-quantity\"},[_c('div',{staticClass:\"list-group\"},[_c('label',{staticClass:\"title\",attrs:{\"for\":\"quantity\"}},[_vm._v(\"數量\")]),_c('div',{staticClass:\"minus-btn\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.subQuantity.apply(null, arguments)}}},[_vm._v(\"-\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.itemQuantity),expression:\"itemQuantity\"}],staticClass:\"quantity\",attrs:{\"type\":\"number\",\"id\":\"quantity\",\"max\":_vm.product.quantity,\"disabled\":_vm.product.quantity <= 1},domProps:{\"value\":(_vm.itemQuantity)},on:{\"change\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.changeQuantity.apply(null, arguments)},\"input\":function($event){if($event.target.composing)return;_vm.itemQuantity=$event.target.value}}}),_c('input',{attrs:{\"type\":\"hidden\",\"name\":\"productId\"},domProps:{\"value\":_vm.product.id}}),_c('input',{attrs:{\"type\":\"hidden\",\"name\":\"cartId\"},domProps:{\"value\":_vm.cartId}}),_c('div',{staticClass:\"plus-btn\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.addQuantity.apply(null, arguments)}}},[_vm._v(\"+\")])]),_c('button',{staticClass:\"add-cart\",attrs:{\"type\":\"submit\"}},[_vm._v(\"加入購物車\")])])])],1)])],1),_vm._m(0),_c('div',{staticClass:\"cards-wrapper container\"},[_c('hr'),_c('div',{staticClass:\"d-flex align-items-center justify-content-between mt-5\"},[_c('h2',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.products.length),expression:\"products.length\"}],staticClass:\"border-blue pl-3 text-left font-weight-bold\"},[_vm._v(\"您可能會喜歡\")]),_c('router-link',{attrs:{\"to\":\"/products\"}},[_c('button',{staticClass:\"btn btn-outline-dark\",attrs:{\"type\":\"button\"}},[_c('i',{staticClass:\"fa fa-arrow-left\",attrs:{\"aria-hidden\":\"true\"}}),_vm._v(\" 回商品列表 \")])])],1),_c('div',{staticClass:\"row m-3\"},_vm._l((_vm.products),function(product){return _c('div',{key:product.id,staticClass:\"product-card col-xl-3 col-lg-4 col-sm-6 mb-3\"},[_c('router-link',{attrs:{\"to\":{ name: 'product', params: { id: product.id } }}},[(_vm.isProcessing === true && _vm.clickProductId === product.id)?_c('ProcessSpinner'):_vm._e(),_c('div',{staticClass:\"product-img\"},[_c('img',{attrs:{\"src\":product.image,\"alt\":\"\"}})]),_c('div',{staticClass:\"text-left pl-1\"},[_c('div',{staticClass:\"product-name mt-1 font-weight-bold\"},[_vm._v(_vm._s(product.name))]),_c('span',{staticClass:\"product-category\"},[_c('i',{staticClass:\"fa fa-tag\",attrs:{\"aria-hidden\":\"true\"}}),_vm._v(\" \"+_vm._s(product.Category.name))]),_c('div',{staticClass:\"product-price\"},[_vm._v(\"NT$ \"+_vm._s(product.price))]),_c('div',{staticClass:\"card-detail\"},[_c('i',{staticClass:\"fa fa-search\",attrs:{\"aria-hidden\":\"true\"}}),_vm._v(\" 查看明細\")]),_c('button',{staticClass:\"btn p-2 text-white\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.addToCart(product.id)}}},[_vm._v(\"加入購物車\")])])],1)],1)}),0)])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('hr'),_c('h3',{staticClass:\"text-center font-weight-bold text-blue\"},[_vm._v(\"購物須知\")]),_c('p',{staticClass:\"text-left font-weight-bold\"},[_vm._v(\"運送說明\")]),_c('ul',{staticClass:\"text-left\"},[_c('li',{staticClass:\"mt-1\"},[_vm._v(\"◆ 本公司之商品委託物流業者配送。\")]),_c('li',{staticClass:\"mt-1\"},[_vm._v(\"◆ 當確認您的訂單已經付款完成，您的訂單將於付款完成後預計「1~2個工作天」出貨(不含週末及國定假日)；因商品為收到訂單後師傅依序手工製作，部分熱門品項逢節慶檔期可能會有短暫缺貨的情況發生，敬請見諒。\")])]),_c('p',{staticClass:\"text-left font-weight-bold mt-2\"},[_vm._v(\"退換貨注意\")]),_c('ul',{staticClass:\"text-left\"},[_c('li',{staticClass:\"mt-1\"},[_vm._v(\"◆ 圖片僅供參考，商品內容物以實際收到商品為主。\")]),_c('li',{staticClass:\"mt-1\"},[_vm._v(\"◆ 因本公司堅持保持產品之新鮮度，若簽收商品時發現包裝遭受破壞，建議您於商品到貨24小時內，請拍照存證並立即與我們聯繫。\")])])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"product-container\">\r\n    <div class=\"product-wrapper container\">\r\n      <Spinner v-if=\"isLoading === true\" />\r\n      <div v-else class=\"product-detail pt-5\">\r\n        <div class=\"product-img\">\r\n          <img :src=\"product.image\" alt=\"\" />\r\n        </div>\r\n\r\n        <div class=\"product-info\">\r\n          <ProcessSpinner v-if=\"isProcessing === true && clickProductId === product.id\" />\r\n          <div class=\"product-name\">{{ product.name }}</div>\r\n          <div class=\"product-price\">NT$ {{ product.price }}</div>\r\n          <span class=\"line\"></span>\r\n          <div class=\"product-description\">\r\n            {{ product.description }}\r\n          </div>\r\n          <span class=\"line\"></span>\r\n          <form @submit.prevent.stop=\"handleSubmit\">\r\n            <div class=\"product-quantity\">\r\n              <div class=\"list-group\">\r\n                <label class=\"title\" for=\"quantity\">數量</label>\r\n                <div class=\"minus-btn\" @click.prevent.stop=\"subQuantity\">-</div>\r\n                <input @change.prevent.stop=\"changeQuantity\" type=\"number\" class=\"quantity\" id=\"quantity\"\r\n                  v-model=\"itemQuantity\" :max=\"product.quantity\" :disabled=\"product.quantity <= 1\" />\r\n                <input type=\"hidden\" name=\"productId\" :value=\"product.id\" />\r\n                <input type=\"hidden\" name=\"cartId\" :value=\"cartId\" />\r\n                <div class=\"plus-btn\" @click.prevent.stop=\"addQuantity\">+</div>\r\n              </div>\r\n              <button type=\"submit\" class=\"add-cart\">加入購物車</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"container\">\r\n      <hr>\r\n        <h3 class=\"text-center font-weight-bold text-blue\">購物須知</h3>\r\n        \r\n          <p class=\"text-left font-weight-bold\">運送說明</p>\r\n        <ul class=\"text-left\">\r\n          <li class=\"mt-1\">◆ 本公司之商品委託物流業者配送。</li>\r\n          <li class=\"mt-1\">◆ 當確認您的訂單已經付款完成，您的訂單將於付款完成後預計「1~2個工作天」出貨(不含週末及國定假日)；因商品為收到訂單後師傅依序手工製作，部分熱門品項逢節慶檔期可能會有短暫缺貨的情況發生，敬請見諒。</li>\r\n        </ul>\r\n        <p class=\"text-left font-weight-bold mt-2\">退換貨注意</p>\r\n        <ul class=\"text-left\">\r\n          <li class=\"mt-1\">◆ 圖片僅供參考，商品內容物以實際收到商品為主。</li>\r\n          <li class=\"mt-1\">◆ 因本公司堅持保持產品之新鮮度，若簽收商品時發現包裝遭受破壞，建議您於商品到貨24小時內，請拍照存證並立即與我們聯繫。</li>\r\n\r\n          </ul>\r\n        \r\n      </div>\r\n    <div class=\"cards-wrapper container \">\r\n      <hr>\r\n      <div class=\"d-flex align-items-center justify-content-between mt-5\"\r\n      >\r\n        <h2 class=\" border-blue pl-3 text-left font-weight-bold\"\r\n        v-show=\"products.length\"\r\n        >您可能會喜歡</h2>\r\n        <router-link to=\"/products\"><button type=\"button\" class=\"btn btn-outline-dark\">\r\n            <i class=\"fa fa-arrow-left\" aria-hidden=\"true\"></i>\r\n            回商品列表\r\n          </button></router-link>\r\n      </div>\r\n      <div class=\"row m-3\">\r\n        <div class=\"product-card col-xl-3 col-lg-4 col-sm-6 mb-3\" v-for=\"product in products\" :key=\"product.id\">\r\n          <router-link :to=\"{ name: 'product', params: { id: product.id } }\">\r\n            <ProcessSpinner v-if=\"isProcessing === true && clickProductId === product.id\" />\r\n            <div class=\"product-img\"><img :src=\"product.image\" alt=\"\" /></div>\r\n            <div class=\"text-left pl-1\">\r\n              <div class=\"product-name mt-1 font-weight-bold\">{{ product.name }}</div>\r\n              <span class=\"product-category\"><i class=\"fa fa-tag\" aria-hidden=\"true\"></i>\r\n                {{ product.Category.name }}</span>\r\n              <div class=\"product-price\">NT$ {{ product.price }}</div>\r\n              <div class=\"card-detail\"><i class=\"fa fa-search\" aria-hidden=\"true\"></i>\r\n                查看明細</div>\r\n              <button type=\"button\" class=\"btn p-2 text-white\" @click.prevent.stop=\"addToCart(product.id)\">加入購物車</button>\r\n            </div>\r\n          </router-link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ProductsApi from \"../apis/products\";\r\nimport CartApi from \"../apis/cart\";\r\nimport { Toast } from \"../utils/helpers\";\r\nimport { mapState } from \"vuex\";\r\nimport Spinner from \"../components/Spinner.vue\";\r\nimport ProcessSpinner from \"../components/ProcessSpinner.vue\";\r\nimport $ from \"jquery\"\r\n\r\nexport default {\r\n  components: {\r\n    Spinner,\r\n    ProcessSpinner,\r\n  },\r\n  data() {\r\n    return {\r\n      product: {},\r\n      products: [],\r\n      clickProductId: \"\",\r\n      cartId: \"\",\r\n      itemQuantity: 1,\r\n      isLoading: true,\r\n      isProcessing: false,\r\n    };\r\n  },\r\n  created() {\r\n    const { id: productId } = this.$route.params;\r\n    this.cartId = localStorage.getItem(\"cartId\");\r\n    this.fetchProduct({ productId });\r\n  },\r\n  beforeRouteUpdate(to, from, next) {\r\n    this.isLoading = true;\r\n    const { id } = to.params;\r\n    this.fetchProduct({ productId: id });\r\n    $('html, body').animate({\r\n      scrollTop: 0,\r\n    }, 200)\r\n\r\n    next();\r\n  },\r\n  methods: {\r\n    async fetchProduct({ productId }) {\r\n      try {\r\n        const response = await ProductsApi.getProduct({ productId });\r\n        const { data } = response;\r\n        if (response.status === \"error\") {\r\n          throw new Error(data.message);\r\n        }\r\n        const { product } = data;\r\n        this.product = product;\r\n        await this.getProducts();\r\n        this.isLoading = false;\r\n      } catch (error) {\r\n        this.isLoading = false;\r\n        Toast.fire({\r\n          icon: \"error\",\r\n          title: \"無法取得產品資料，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    async getProducts() {\r\n      try {\r\n        const res = await ProductsApi.getProducts({\r\n          page: \"\",\r\n          categoryId: this.product.categoryId\r\n        })\r\n        const data = res.data.products.filter(item => item.id !== this.product.id).splice(0, 4)\r\n        this.products = data\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    },\r\n    addQuantity() {\r\n      if (this.itemQuantity < this.product.quantity) {\r\n        this.itemQuantity++;\r\n      }\r\n    },\r\n    subQuantity() {\r\n      if (this.itemQuantity > this.product.quantity) {\r\n        this.itemQuantity = this.product.quantity;\r\n      } else if (this.itemQuantity > 1) {\r\n        this.itemQuantity--;\r\n      }\r\n    },\r\n    changeQuantity() {\r\n      if (!this.itemQuantity || this.itemQuantity < 1) {\r\n        this.itemQuantity = 1\r\n      }\r\n    },\r\n    async handleSubmit() {\r\n      try {\r\n        this.clickProductId = this.product.id\r\n        this.isProcessing = true;\r\n        const response = await CartApi.postCart({\r\n          productId: this.product.id,\r\n          quantity: this.itemQuantity,\r\n          cartId: this.cartId,\r\n        });\r\n        const { data } = response;\r\n        this.$bus.$emit(\"cartUpdate\", {\r\n          cart: data.cart,\r\n        });\r\n        if (response.status === \"error\") {\r\n          throw new Error(data.message);\r\n        }\r\n        this.getCart();\r\n        localStorage.setItem(\"cartId\", data.getCartId);\r\n        this.isProcessing = false;\r\n      } catch (error) {\r\n        this.isProcessing = false;\r\n        if (this.isAuthenticated === false) {\r\n          Toast.fire({\r\n            icon: \"error\",\r\n            title: \"無法加入購物車，請先登入使用者\",\r\n          });\r\n        } else {\r\n          Toast.fire({\r\n            icon: \"error\",\r\n            title: \"無法加入購物車，請稍後再試\",\r\n          });\r\n        }\r\n\r\n      }\r\n    },\r\n    async getCart() {\r\n      try {\r\n        const response = await CartApi.getCart();\r\n        const { data } = response;\r\n        if (response.status === \"error\") {\r\n          throw new Error(data.message);\r\n        }\r\n        this.$bus.$emit(\"cartUpdate\", {\r\n          cart: data.carts,\r\n        });\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    async addToCart(id) {\r\n      try {\r\n        this.clickProductId = id\r\n        this.isProcessing = true\r\n\r\n        const response = await CartApi.postCart({\r\n          productId: id,\r\n          quantity: 1,\r\n          cartId: this.cartId\r\n        })\r\n        const { data } = response;\r\n        this.$bus.$emit(\"cartUpdate\", {\r\n          cart: data.cart,\r\n        });\r\n        if (response.status === 200) {\r\n          Toast.fire({\r\n            icon: \"success\",\r\n            title: \"成功加入購物車\",\r\n          });\r\n        }\r\n        if (response.status === \"error\") {\r\n          throw new Error(data.message);\r\n        }\r\n        await this.getCart();\r\n        this.isProcessing = false\r\n      } catch (error) {\r\n        this.isProcessing = false\r\n        Toast.fire({\r\n          icon: \"error\",\r\n          title: \"無法加入購物車，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapState([\"currentUser\", \"isAuthenticated\"]),\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.product-container {\r\n\r\n  .product-wrapper {\r\n    margin: auto;\r\n\r\n  }\r\n  .product-detail {\r\n      width: 100%;\r\n\r\n      .product-img {\r\n        margin: auto;\r\n        background-color: #ebe0e0;\r\n      }\r\n\r\n      img {\r\n        width: 100%;\r\n        height: 300px;\r\n        object-fit: cover;\r\n      }\r\n\r\n      .product-info {\r\n        position: relative;\r\n        padding: 1rem;\r\n      }\r\n\r\n      .product-name {\r\n        font-size: 1.6rem;\r\n        font-weight: 600;\r\n      }\r\n\r\n      .product-price {\r\n        color: #00457c;\r\n        font-size: 1.1rem;\r\n        padding: 0.5rem 0;\r\n      }\r\n\r\n      .product-description {\r\n        padding: 2rem 0;\r\n      }\r\n\r\n      .line {\r\n        position: absolute;\r\n        left: 0.5rem;\r\n        right: 0.5rem;\r\n        height: 1px;\r\n        content: \"\";\r\n        background: #747373;\r\n      }\r\n\r\n      .product-quantity {\r\n        text-align: center;\r\n        display: flex;\r\n        padding: 2rem 0;\r\n\r\n        .list-group {\r\n          display: flex;\r\n          flex-flow: row wrap;\r\n          line-height: 2rem;\r\n\r\n          .title {\r\n            padding-right: 0.5rem;\r\n            margin: auto;\r\n          }\r\n\r\n          .minus-btn,\r\n          .plus-btn {\r\n            border: 1px solid #2a2a2a;\r\n            margin: auto;\r\n            width: 1.3rem;\r\n            background: #e0e2e4;\r\n          }\r\n\r\n          .minus-btn:hover,\r\n          .plus-btn:hover {\r\n            cursor: pointer;\r\n            background: #ffffff;\r\n          }\r\n\r\n          input[type=\"number\"] {\r\n            -moz-appearance: textfield;\r\n\r\n            &::-webkit-inner-spin-button {\r\n              -webkit-appearance: none;\r\n            }\r\n          }\r\n\r\n          .quantity {\r\n            width: 2rem;\r\n            margin: auto;\r\n            text-align: center;\r\n            border-top: 1px solid #2a2a2a;\r\n            border-bottom: 1px solid #2a2a2a;\r\n          }\r\n        }\r\n\r\n        .add-cart {\r\n          margin: auto;\r\n          width: 8rem;\r\n          line-height: 2rem;\r\n          border: none;\r\n          border-radius: 3px;\r\n          color: #ffffff;\r\n          background: #4f2e0b;\r\n        }\r\n\r\n        .add-cart:hover {\r\n          cursor: pointer;\r\n        }\r\n      }\r\n      @media (min-width: 900px) {\r\n        display: flex;\r\n\r\n        .product-img {\r\n          width: 45%;\r\n        }\r\n\r\n        .product-info {\r\n          width: 45%;\r\n        }\r\n      }\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Product.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Product.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Product.vue?vue&type=template&id=80470018&\"\nimport script from \"./Product.vue?vue&type=script&lang=js&\"\nexport * from \"./Product.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Product.vue?vue&type=style&index=0&id=80470018&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Product.vue?vue&type=style&index=0&id=80470018&prod&lang=scss&\""],"sourceRoot":""}