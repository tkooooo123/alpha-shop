(function(t){function e(e){for(var s,r,o=e[0],c=e[1],l=e[2],d=0,u=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&u.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);p&&p(e);while(u.length)u.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,r=1;r<a.length;r++){var o=a[r];0!==i[o]&&(s=!1)}s&&(n.splice(e--,1),t=c(c.s=a[0]))}return t}var s={},r={app:0},i={app:0},n=[];function o(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"db2ab91a","chunk-338b93fe":"c9fd0b77","chunk-47c69631":"ad716d92","chunk-a0931d9e":"3ba76224","chunk-f4f0610c":"c759c278"}[t]+".js"}function c(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a={"chunk-338b93fe":1,"chunk-47c69631":1,"chunk-a0931d9e":1,"chunk-f4f0610c":1};r[t]?e.push(r[t]):0!==r[t]&&a[t]&&e.push(r[t]=new Promise((function(e,a){for(var s="css/"+({about:"about"}[t]||t)+"."+{about:"31d6cfe0","chunk-338b93fe":"220607a0","chunk-47c69631":"ef3a3090","chunk-a0931d9e":"1a7b43a6","chunk-f4f0610c":"7561e77c"}[t]+".css",i=c.p+s,n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var l=n[o],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===s||d===i))return e()}var u=document.getElementsByTagName("style");for(o=0;o<u.length;o++){l=u[o],d=l.getAttribute("data-href");if(d===s||d===i)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var s=e&&e.target&&e.target.src||i,n=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=s,delete r[t],p.parentNode.removeChild(p),a(n)},p.href=i;var m=document.getElementsByTagName("head")[0];m.appendChild(p)})).then((function(){r[t]=0})));var s=i[t];if(0!==s)if(s)e.push(s[2]);else{var n=new Promise((function(e,a){s=i[t]=[e,a]}));e.push(s[2]=n);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=o(t);var u=new Error;l=function(e){d.onerror=d.onload=null,clearTimeout(p);var a=i[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",u.name="ChunkLoadError",u.type=s,u.request=r,a[1](u)}i[t]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(e)},c.m=t,c.c=s,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)c.d(a,s,function(e){return t[e]}.bind(null,s));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/alpha-shop/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var p=d;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1984:function(t,e,a){},"1a26":function(t,e,a){"use strict";a("fcae")},"1a54":function(t,e,a){"use strict";a("1984")},"1e79":function(t,e,a){},2375:function(t,e,a){"use strict";var s=function(){var t=this;t._self._c;return t._m(0)},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"loader-area"},[e("div",{staticClass:"loader"}),e("div",{staticClass:"loader-content"},[t._v("Loading...")])])}],i=(a("6308"),a("2877")),n={},o=Object(i["a"])(n,s,r,!1,null,null,null);e["a"]=o.exports},"2fa3":function(t,e,a){"use strict";a.d(e,"b",(function(){return c})),a.d(e,"a",(function(){return l}));var s=a("bc3a"),r=a.n(s),i=a("3d20"),n=a.n(i);const o="https://lit-lowlands-54861.herokuapp.com/api",c=r.a.create({baseURL:o}),l=n.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})},3122:function(t,e,a){"use strict";a("7a93")},3558:function(t,e,a){"use strict";a("de2a")},"38c7":function(t,e,a){"use strict";a("afd9")},"3e4f":function(t,e,a){"use strict";a("c6b5")},5374:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination"},[e("li",{directives:[{name:"show",rawName:"v-show",value:t.previousPage,expression:"previousPage"}],class:["page-item",{disabled:1===t.currentPage}]},["admin"===t.currentUser.role?e("router-link",{staticClass:"page-link",attrs:{"aria-label":"Previous",to:{name:"admin-products",query:{categoryId:t.categoryId,page:t.previousPage}}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])]):e("router-link",{staticClass:"page-link",attrs:{"aria-label":"Previous",to:{name:"products",query:{categoryId:t.categoryId,page:t.previousPage}}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])],1),t._l(t.totalPage,(function(a){return e("li",{key:a,class:["page-item",{active:t.currentPage===a}]},["admin"===t.currentUser.role?e("router-link",{staticClass:"page-link",attrs:{to:{name:"admin-products",query:{categoryId:t.categoryId,page:a}}}},[t._v(" "+t._s(a)+" ")]):e("router-link",{staticClass:"page-link",attrs:{to:{name:"products",query:{categoryId:t.categoryId,page:a}}}},[t._v(" "+t._s(a)+" ")])],1)})),e("li",{directives:[{name:"show",rawName:"v-show",value:t.nextPage,expression:"nextPage"}],class:["page-item",{disabled:t.currentPage===t.totalPage}]},["admin"===t.currentUser.role?e("router-link",{staticClass:"page-link",attrs:{to:{name:"admin-products",query:{categoryId:t.categoryId,page:t.nextPage}},"aria-label":"Next"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])]):e("router-link",{staticClass:"page-link",attrs:{to:{name:"products",query:{categoryId:t.categoryId,page:t.nextPage}},"aria-label":"Next"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])],1)],2)])},r=[],i=a("2f62"),n={props:{categoryId:{type:[String,Number],default:""},currentPage:{type:Number,default:1},totalPage:{type:Number,required:!0},previousPage:{type:Number,required:!0},nextPage:{type:Number,required:!0}},computed:{...Object(i["b"])(["currentUser","isAuthenticated"])}},o=n,c=(a("1a26"),a("2877")),l=Object(c["a"])(o,s,r,!1,null,null,null);e["a"]=l.exports},"55c0":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view"),e("GoToTop")],1)},i=[],n=a("4989"),o=(a("ab8b"),a("b682"),a("15f5"),a("7051"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"go-top d-flex justify-content-center align-items-center",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.GoTop.apply(null,arguments)}}},[e("i",{staticClass:"fa fa-arrow-up",attrs:{"aria-hidden":"true"}})])}),c=[],l=a("1157"),d=a.n(l),u={data(){return{height:"",scrollTop:""}},created(){this.height=d()(window).height(),window.addEventListener("scroll",this.handleScroll)},methods:{GoTop(){d()("html, body").animate({scrollTop:0},200)},handleScroll(){const t=d()(window).scrollTop();this.scrollTop=t,t>this.height/2?d()(".go-top").css("opacity","0.9"):d()(".go-top").css("opacity","0")}}},p=u,m=(a("f6f6"),a("2877")),h=Object(m["a"])(p,o,c,!1,null,null,null),g=h.exports,f={name:"App",components:{GoToTop:g},provide(){return{reload:this.reload}},data(){return{isRouterAlive:!0}},methods:{reload(){console.log("reload occure"),this.isRouterAlive=!1,this.$nextTick(()=>{this.isRouterAlive=!0})}},mounted(){window.fbAsyncInit=function(){FB.init({appId:"633785478337661",cookie:!0,xfbml:!0,version:"v16.0"}),FB.AppEvents.logPageView()}}},v=f,b=(a("3122"),Object(m["a"])(v,r,i,!1,null,null,null)),C=b.exports,_=a("8c4f"),y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home-container"},[e("HomeSwiper"),e("div",{staticClass:"container"},[t._m(0),e("div",{staticClass:"cards-wrapper m-3",attrs:{"data-aos":"fade-up"}},[e("h2",{staticClass:"border-primary pl-3 text-left mt-5"},[t._v("最新商品")]),e("div",{staticClass:"row m-3"},t._l(t.products,(function(a){return e("div",{key:a.id,staticClass:"product-card col-xl-3 col-lg-4 col-sm-6"},[e("router-link",{attrs:{to:{name:"product",params:{id:a.id}}}},[e("div",{staticClass:"product-img"},[e("img",{attrs:{src:a.image,alt:""}})]),e("div",{staticClass:"text-left pl-1"},[e("div",{staticClass:"product-name"},[t._v(t._s(a.name))]),e("span",{staticClass:"product-category"},[e("i",{staticClass:"fa fa-tag",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(a.Category.name))]),e("div",{staticClass:"product-price"},[t._v("NT$ "+t._s(a.price))]),e("div",{staticClass:"card-detail"},[e("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}}),t._v(" 查看明細")]),e("button",{staticClass:"btn p-2 text-white",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.addToCart(a.id)}}},[t._v("加入購物車")])])])],1)})),0)]),e("div",{staticClass:"message-wrapper text-left m-3",attrs:{"data-aos":"slide-right"}},[e("h2",{staticClass:"border-primary pl-3 mt-5"},[t._v("購買心得")]),e("div",{staticClass:"row d-flex justify-content-center"},t._l(t.messages,(function(a){return e("div",{key:a.id,staticClass:"col-lg-4 mb-5"},[e("div",{staticClass:"message-card bg-light m-2 p-2"},[e("h4",{staticClass:"message-title mt-3"},[t._v(t._s(a.product))]),e("div",{staticClass:"d-flex align-items-center"},[e("img",{attrs:{src:a.avatar,alt:""}}),e("div",{staticClass:"ml-2 mt-3"},[e("p",{staticClass:"message-name mt-3"},[t._v(t._s(a.name))]),e("p",{staticClass:"mt-3"},[t._v(t._s(a.feedback))])])])])])})),0)])])],1)},w=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-3"},[e("div",{staticClass:"about-banner row d-flex mt-5",attrs:{"data-aos":"slide-down"}},[e("div",{staticClass:"col-md-6"},[e("h2",{staticClass:"border-primary pl-3 text-left mt-5"},[t._v("About")]),e("p",{staticClass:"m-5"},[t._v("成立於2023年2月，秉持製作天然、營養、安全的食品，以天然無添加為製作核心，貫徹「每一位顧客本該享有被公平對待與尊重」的創辦理念")])]),e("div",{staticClass:"col-md-6"},[e("img",{attrs:{src:"https://hinetcdn.waca.ec/uploads/shops/14796/products/1b/1bf24b1592e9840e68771bcca8708f38.jpg",alt:""}})])])])}],k=(a("d9e2"),a("ee21")),P=a("cc17"),I=function(){var t=this,e=t._self._c;return e("swiper",{ref:"mySwiper",staticClass:"swipe-container",attrs:{options:t.swiperOptions}},[e("swiper-slide",{staticClass:"swiper-slide"},[e("img",{attrs:{src:"https://www.sweet-dumpling.com/media/content/4e6846c86858d8ac69c3e236b4416540/macaron-cover.jpg",alt:""}})]),e("swiper-slide",{staticClass:"swiper-slide"},[e("img",{attrs:{src:"https://tokyo-kitchen.icook.network/uploads/recipe/cover/81654/ecdf702af6a7b08c.jpg",alt:""}})]),e("swiper-slide",{staticClass:"swiper-slide"},[e("img",{attrs:{src:"https://www.love2gather.co/content/images/2021/08/product--138.jpg",alt:""}})])],1)},x=[],S={data(){return{swiperOptions:{centeredSlides:!0,autoplay:{disableOnInteraction:!1,delay:2500},observer:!0,observeSlideChildren:!0,preventLinksPropagation:!1,pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(t,e){return'<span class="'+e+'">'+(t+1)+"</span>"}}}}},computed:{swiper(){return this.$refs.mySwiper.$swiper}}},O=S,q=(a("d771"),Object(m["a"])(O,I,x,!1,null,null,null)),L=q.exports,j=a("2fa3"),$=a("2f62");const E=[{id:1,avatar:"https://w7.pngwing.com/pngs/754/2/png-transparent-samsung-galaxy-a8-a8-user-login-telephone-avatar-pawn-blue-angle-sphere-thumbnail.png",name:"林先生",product:"抹茶巧克力馬卡龍",feedback:"抹茶味很濃，和巧克力搭配起來很好吃"},{id:2,avatar:"https://w7.pngwing.com/pngs/754/2/png-transparent-samsung-galaxy-a8-a8-user-login-telephone-avatar-pawn-blue-angle-sphere-thumbnail.png",name:"蔡小姐",product:"藍莓玉米脆片",feedback:"口感酥脆，甜而不膩"},{id:3,avatar:"https://w7.pngwing.com/pngs/754/2/png-transparent-samsung-galaxy-a8-a8-user-login-telephone-avatar-pawn-blue-angle-sphere-thumbnail.png",name:"李小姐",product:"經典黑巧克力餅乾",feedback:"巧克力味濃厚且不會很苦，很適合做下午茶點心"}];var N={name:"HomeView",components:{HomeSwiper:L},data(){return{products:[],clickProductId:"",messages:""}},created(){this.getProducts(),this.messages=E},methods:{async getProducts(){try{const t=await k["a"].getProducts({page:"",categoryId:""}),e=t.data.products.splice(0,4);this.products=e}catch(t){console.log(t)}},async addToCart(t){try{this.clickProductId=t,this.isProcessing=!0;const e=await P["a"].postCart({productId:t,quantity:1,cartId:this.cartId}),{data:a}=e;if(this.$bus.$emit("cartUpdate",{cart:a.cart}),200===e.status&&j["a"].fire({icon:"success",title:"成功加入購物車"}),"error"===e.status)throw new Error(a.message);await this.getCart(),this.isProcessing=!1}catch(e){this.isProcessing=!1,!1===this.isAuthenticated?j["a"].fire({icon:"error",title:"無法加入購物車，請先登入使用者"}):j["a"].fire({icon:"error",title:"無法加入購物車，請稍後再試"})}},async getCart(){try{const t=await P["a"].getCart(),{data:e}=t;if("error"===t.status)throw new Error(e.message);this.$bus.$emit("cartUpdate",{cart:e.carts})}catch(t){console.log(t)}}},computed:{...Object($["b"])(["currentUser","isAuthenticated"])}},U=N,A=(a("a0b4"),Object(m["a"])(U,y,w,!1,null,null,null)),T=A.exports,D=(a("14d9"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"products-container container"},[!0===t.isLoading?e("Spinner"):t._e(),e("div",{staticClass:"products-wrapper row"},[e("div",{staticClass:"side-wrapper col-md-3"},[e("div",{staticClass:"title mt-md-0 mt-5 bg-light text-left pl-3"},[t._v("商品分類")]),e("ul",{staticClass:"list-group d-none d-md-block mt-3"},[e("li",{staticClass:"list-item",class:{active:""===t.categoryId}},[e("router-link",{attrs:{to:"/products"}},[e("i",{staticClass:"fas fa-angle-left"}),t._v(" 全部商品 ")])],1),t._l(t.categories,(function(a){return e("li",{key:a.id,staticClass:"list-item",class:{active:t.categoryId===a.id}},[e("router-link",{attrs:{to:{name:"products",query:{categoryId:a.id}}}},[e("i",{staticClass:"fas fa-angle-left"}),t._v(" "+t._s(a.name)+" ")])],1)}))],2),e("div",{staticClass:"select-wrapper text-left d-md-none pl-3 mt-3 mb-3"},[e("select",{staticClass:"border-0",attrs:{name:"",id:""},on:{change:t.handleChange}},[e("option",{attrs:{value:""}},[t._v("全部商品")]),t._l(t.categories,(function(a){return e("option",{key:a.id,class:{active:a.id===t.categoryId},domProps:{value:a.id}},[t._v(t._s(a.name))])}))],2)])]),t.products.length?e("div",{staticClass:"main-wrapper col-md-9"},[e("div",{staticClass:"product-wrapper"},[e("ProductSwiper",{attrs:{products:t.products}}),e("div",{staticClass:"product-wrapper"},[e("h2",{staticClass:"title"},[t._v("最新商品 TOP 5")]),t._l(t.products.slice(0,5),(function(a,s){return e("div",{key:a.id,staticClass:"product-card",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.$router.push("/products/"+a.id)}}},[e("div",{staticClass:"product-card-number"},[t._v("0"+t._s(s+1))]),e("div",{staticClass:"product-card-image"},[e("img",{attrs:{src:a.image,alt:""}})]),e("div",{staticClass:"product-card-name"},[t._v(t._s(a.name))])])}))],2)],1),e("h2",{staticClass:"title"},[t._v("熱賣商品")]),e("hr"),e("div",{staticClass:"cards-wrapper position-relative"},t._l(t.products,(function(a){return e("div",{key:a.id,staticClass:"product-card mb-3"},[!0===t.isProcessing&&t.ClickProductId===a.id?e("ProcessSpinner"):t._e(),e("router-link",{attrs:{to:{name:"product",params:{id:a.id}}}},[e("div",{staticClass:"product-img"},[e("img",{attrs:{src:a.image,alt:""}})]),e("div",{staticClass:"text-left pl-1"},[e("div",{staticClass:"product-name"},[t._v(t._s(a.name))]),e("span",{staticClass:"product-category"},[e("i",{staticClass:"fa fa-tag",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(a.Category.name))]),e("div",{staticClass:"product-price"},[t._v("NT$ "+t._s(a.price))]),e("div",{staticClass:"product-detail"},[e("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}}),t._v(" 查看明細")]),e("button",{staticClass:"btn p-2 text-white",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.addToCart(a.id)}}},[t._v("加入購物車")])])])],1)})),0),e("ProductsPagination",{attrs:{"current-page":t.currentPage,"total-page":t.totalPage,"previous-page":t.previousPage,"next-page":t.nextPage,categoryId:t.categoryId}})],1):e("h2",{staticClass:"border-0 mt-3 ml-5"},[t._v("此分類尚未擁有商品")])])],1)}),B=[],M=a("5374"),F=function(){var t=this,e=t._self._c;return e("swiper",{ref:"mySwiper",staticClass:"swipe-container",attrs:{options:t.swiperOptions}},[t._l(t.products.slice(0,5),(function(a,s){return e("swiper-slide",{key:a.id,staticClass:"swiper-slide"},[e("router-link",{attrs:{to:"/products/"+a.id}},[e("img",{attrs:{src:a.image,alt:""}})]),e("div",{staticClass:"swiper-slide-name"},[e("div",{staticClass:"item-number"},[t._v("0"+t._s(s+1)+" |")]),e("div",[t._v(" "+t._s(a.name)+" ")])])],1)})),e("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)},V=[],z={props:{products:{type:Array,required:!0}},data(){return{swiperOptions:{centeredSlides:!0,autoplay:{disableOnInteraction:!1,delay:2500},observer:!0,observeSlideChildren:!0,preventLinksPropagation:!1,pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(t,e){return'<span class="'+e+'">'+(t+1)+"</span>"}}}}},computed:{swiper(){return this.$refs.mySwiper.$swiper}}},Q=z,R=(a("b1db"),Object(m["a"])(Q,F,V,!1,null,null,null)),G=R.exports,H=a("2375"),W=a("c09c"),J={components:{ProductsPagination:M["a"],ProductSwiper:G,Spinner:H["a"],ProcessSpinner:W["a"]},data(){return{products:[],categories:[],categoryId:"",currentPage:1,totalPage:1,previousPage:-1,nextPage:-1,isLoading:!0,isProcessing:!1,ClickProductId:""}},created(){const{page:t="",categoryId:e=""}=this.$route.query;this.fetchProducts({queryPage:t,queryCategoryId:e}),this.cartId=localStorage.getItem("cartId")},beforeRouteUpdate(t,e,a){const{page:s="",categoryId:r=""}=t.query;this.isLoading=!0,this.fetchProducts({queryPage:s,queryCategoryId:r}),a()},methods:{async fetchProducts({queryPage:t,queryCategoryId:e}){try{const a=await k["a"].getProducts({page:t,categoryId:e}),{data:s}=a;if("error"===a.status)throw new Error(s.message);const{products:r,categories:i,categoryId:n,pagination:o}=s;this.products=r,this.categories=i,this.categoryId=n;const{currentPage:c,totalPage:l,prev:d,next:u}=o;this.currentPage=c,this.totalPage=l,this.previousPage=d,this.nextPage=u,this.isLoading=!1}catch(a){j["a"].fire({icon:"error",title:"無法取得產品資料，請稍後再試"})}},async addToCart(t){try{this.ClickProductId=t,this.isProcessing=!0;const e=await P["a"].postCart({productId:t,quantity:1,cartId:this.cartId}),{data:a}=e;if(this.$bus.$emit("cartUpdate",{cart:a.cart}),200===e.status&&j["a"].fire({icon:"success",title:"成功加入購物車"}),"error"===e.status)throw new Error(a.message);await this.getCart(),this.isProcessing=!1}catch(e){console.log(e),this.isProcessing=!1,j["a"].fire({icon:"error",title:"無法加入購物車，請稍後再試"})}},async getCart(){try{const t=await P["a"].getCart(),{data:e}=t;if("error"===t.status)throw new Error(e.message);this.$bus.$emit("cartUpdate",{cart:e.carts})}catch(t){console.log(t)}},async handleChange(t){this.isLoading=!0,this.categoryId=t.target.value,await this.fetchProducts({queryPage:"",queryCategoryId:this.categoryId}),this.isLoading=!1}}},K=J,X=Object(m["a"])(K,D,B,!1,null,null,null),Y=X.exports,Z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"signin-container"},[e("div",{staticClass:"wrapper py-5"},[!0===t.isLoading?e("Spinner"):t._e(),e("div",{staticClass:"title-wrapper text-center mb-4 d-flex justify-content-center"},[!0===t.isProcessing?e("ProcessSpinner"):t._e(),e("div",{staticClass:"title-login",class:{selected:t.loginSelected},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.loginSelect.apply(null,arguments)}}},[t._v(" 會員登入 ")]),e("span",{staticClass:"line"}),e("div",{staticClass:"title-register",class:{selected:t.registerSelected},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.registerSelect.apply(null,arguments)}}},[t._v(" 立即註冊 ")])],1),e("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function({invalid:s,handleSubmit:r}){return[t.loginSelected?e("form",{staticClass:"w-40",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),r(t.loginSubmit)}}},[e("div",{staticClass:"login-wrapper"},[e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function({errors:a,classes:s}){return[e("div",{staticClass:"form-label-group mb-2"},[e("label",{attrs:{for:"email",hidden:""}},[t._v("email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",class:s,attrs:{id:"email",name:"email",type:"email",placeholder:"請輸入 Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),e("span",{staticClass:"invalid-feedback d-flex"},[t._v(t._s(a[0]))])])]}}],null,!0)}),e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function({errors:a,classes:s}){return[e("div",{staticClass:"form-label-group mb-3"},[e("label",{attrs:{for:"password",hidden:""}},[t._v("Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",class:s,attrs:{id:"password",name:"密碼",type:"password",placeholder:"請輸入密碼"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),e("span",{staticClass:"invalid-feedback d-flex"},[t._v(t._s(a[0]))])])]}}],null,!0)}),t.loginSelected?e("button",{staticClass:"btn btn-lg btn-primary btn-block mb-3",class:{disabled:s},attrs:{type:"submit"}},[t._v(" 會員登入 ")]):t._e(),e("button",{staticClass:"fb-login",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.fbLogin.apply(null,arguments)}}},[e("img",{staticStyle:{width:"1.5rem",height:"1.5rem"},attrs:{src:a("dd45"),alt:""}}),e("div",[t._v("Facebook 登入")])])],1)]):t._e()]}}])}),e("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function({invalid:a,handleSubmit:s}){return[t.registerSelected?e("form",{staticClass:"w-40",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),s(t.registerSubmit)}}},[e("div",{staticClass:"login-wrapper"},[e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function({errors:a,classes:s}){return[e("div",{staticClass:"form-label-group mb-2"},[e("label",{attrs:{for:"name"}},[t._v("名字")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",class:s,attrs:{id:"name",name:"名字",type:"text",placeholder:"請輸入名字"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),e("span",{staticClass:"invalid-feedback d-flex"},[t._v(t._s(a[0]))])])]}}],null,!0)}),e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function({errors:a,classes:s}){return[e("div",{staticClass:"form-label-group mb-2"},[e("label",{attrs:{for:"email"}},[t._v("電子郵件")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",class:s,attrs:{id:"email",name:"email",type:"email",placeholder:"請輸入 Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),e("span",{staticClass:"invalid-feedback d-flex"},[t._v(t._s(a[0]))])])]}}],null,!0)}),e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function({errors:a,classes:s}){return[e("div",{staticClass:"form-label-group mb-3"},[e("label",{attrs:{for:"password"}},[t._v("密碼")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",class:s,attrs:{id:"password",name:"密碼",type:"password",placeholder:"請輸入密碼"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),e("span",{staticClass:"invalid-feedback d-flex"},[t._v(t._s(a[0]))])])]}}],null,!0)}),e("ValidationProvider",{attrs:{rules:{required:""===t.confirmPassword,confirmed:t.password},tag:"div"},scopedSlots:t._u([{key:"default",fn:function({errors:a,classes:s}){return[e("div",{staticClass:"form-label-group mb-3"},[e("label",{attrs:{for:"confirmPassword"}},[t._v("密碼確認")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPassword,expression:"confirmPassword"}],staticClass:"form-control",class:s,attrs:{id:"confirmPassword",name:"確認密碼",type:"password",placeholder:"請再一次輸入密碼"},domProps:{value:t.confirmPassword},on:{input:function(e){e.target.composing||(t.confirmPassword=e.target.value)}}}),e("span",{staticClass:"invalid-feedback d-flex"},[t._v(t._s(a[0]))])])]}}],null,!0)}),e("button",{staticClass:"btn btn-lg btn-primary btn-block mb-3",class:{disabled:a},attrs:{type:"submit"}},[t._v(" 立即註冊 ")])],1)]):t._e()]}}])})],1)])},tt=[];const et=()=>localStorage.getItem("token");var at={signIn({email:t,password:e}){return j["b"].post("/signin",{email:t,password:e})},signUp({name:t,email:e,password:a,confirmPassword:s}){return j["b"].post("/signup",{name:t,email:e,password:a,confirmPassword:s})},getCurrentUser(){return j["b"].get("/users/getCurrentUser",{headers:{Authorization:"Bearer "+et()}})},postFbSignIn({name:t,email:e}){return j["b"].post("/facebook",{name:t,email:e})}};s["default"].use($["a"]);var st=new $["a"].Store({state:{currentUser:{id:-1,name:"",email:"",role:""},isAuthenticated:!1},getters:{},mutations:{setCurrentUser(t,e){t.currentUser={...t.currentUser,...e},t.isAuthenticated=!0},revokeAuthentication(t){t.currentUser={},t.isAuthenticated=!1,localStorage.removeItem("token")}},actions:{async fetchCurrentUser({commit:t}){try{const{data:e}=await at.getCurrentUser();if("error"===e.status)throw new Error(e.message);return console.log("data",e.currentUser),t("setCurrentUser",e.currentUser),!0}catch(e){return console.log("error",e.message),!1}},async fetchFbUser({commit:t},e){try{const a=await at.postFbSignIn({name:e.name,email:e.email});if("error"===a.status)throw new Error(a.data.message);localStorage.setItem("token",a.data.token),t("setCurrentUser",a.data.user),ca.push({name:"products"})}catch(a){j["a"].fire({icon:"error",title:"登入錯誤，請稍後再試"}),console.log(a)}}},modules:{}}),rt={components:{ProcessSpinner:W["a"],Spinner:H["a"]},data(){return{name:"",email:"",password:"",confirmPassword:"",loginSelected:!0,registerSelected:!1,isProcessing:!1,isLoading:!1}},created(){},methods:{async loginSubmit(){try{if(this.isLoading=!0,!this.email||!this.password)return void j["a"].fire({icon:"warning",title:"請填入所有欄位"});const t=await at.signIn({email:this.email,password:this.password}),{data:e}=t;if("error"===e.status)throw new Error(e.message);localStorage.setItem("token",e.token),this.$store.commit("setCurrentUser",e.user),"admin"===e.user.role?this.$router.push("/admin/products"):this.$router.push("/")}catch(t){this.isLoading=!1,this.password="",j["a"].fire({icon:"warning",title:t.message})}},async registerSubmit(){try{if(this.isProcessing=!0,!this.name||!this.email||!this.password||!this.confirmPassword)return void j["a"].fire({icon:"warning",title:"請填入所有欄位"});const t=await at.signUp({name:this.name,email:this.email,password:this.password,confirmPassword:this.confirmPassword}),{data:e}=t;if("error"===e.status)throw new Error(e.message);localStorage.setItem("token",e.token),this.$router.go(0),this.isProcessing=!1}catch(t){this.isProcessing=!1,j["a"].fire({icon:"warning",title:t.message})}},fbLogin(){window.FB.getLoginStatus(t=>{"connected"===t.status?window.FB.api("/me",{fields:"name , email"},(async function(t){await st.dispatch("fetchFbUser",t)})):window.FB.login((function(t){"connected"===t.status?window.FB.api("/me",{fields:"name, email"},(async function(t){await st.dispatch("fetchFbUser",t)})):console.log("Login Failure")}),{scope:"email, public_profile",return_scopes:!0})})},registerSelect(){!1===this.registerSelected&&(this.loginSelected=!1,this.registerSelected=!0)},loginSelect(){!1===this.loginSelected&&(this.loginSelected=!0,this.registerSelected=!1)}}},it=rt,nt=Object(m["a"])(it,Z,tt,!1,null,null,null),ot=nt.exports,ct=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cart-container"},[e("div",{staticClass:"main-wrapper"},[!0===t.isLoading?e("Spinner"):e("div",[0===t.carts.length?e("div",{staticClass:"cart-alert"},[e("h2",[t._v("您的購物車沒有商品！")]),e("router-link",{attrs:{to:"/products"}},[e("div",{staticClass:"shopping-btn"},[t._v("前往購物")])])],1):e("div",{staticClass:"main-container mt-5"},[e("Stepper",{attrs:{stepper:t.stepper}}),e("div",{staticClass:"cart-wrapper row"},[e("CartListItem",{attrs:{cartListItems:t.cartItems,stepper:t.stepper},on:{"delete-cartItem":t.handleDelete}}),e("SubTotal",{attrs:{"initial-stepper":t.stepper,totalPrice:t.totalPrice},on:{"click-step-btn":t.handleStepBtn}}),e("CheckoutForm",{attrs:{"initial-stepper":t.stepper,totalPrice:t.totalPrice,cartId:t.cartId},on:{"click-step-btn":t.handleStepBtn,"get-order-id":t.getOrderId}}),3===t.stepper?e("div",{staticClass:"completed-wrapper"},[e("div",{staticClass:"img-wrapper"},[e("img",{staticClass:"completed-img",attrs:{src:a("b841"),alt:""}})]),e("h1",[t._v("感謝您的訂購")]),e("p",[t._v("已收到您的訂單，請您檢視訂單並確認付款狀態")]),e("div",{staticClass:"btn-wrapper"},[e("router-link",{attrs:{to:"/home"}},[e("div",{staticClass:"prev-btn"},[t._v("前往首頁")])]),e("router-link",{attrs:{to:"/order"}},[e("div",{staticClass:"next-btn"},[t._v("查看訂單")])])],1)]):t._e()],1)],1)])],1)])},lt=[],dt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"step-wrapper d-flex justify-content-center"},[e("div",{staticClass:"step",class:{active:1===t.stepper,checked:t.stepper>1}},[e("div",{staticClass:"circle-container"}),e("div",{staticClass:"label-container"},[t._v("確認商品")])]),e("div",{staticClass:"step",class:{active:2===t.stepper,checked:t.stepper>2}},[e("div",{staticClass:"circle-container"}),e("span",{staticClass:"connect-line"}),e("div",{staticClass:"label-container"},[t._v("填寫資料")])]),e("div",{staticClass:"step",class:{active:3===t.stepper}},[e("div",{staticClass:"circle-container"}),e("span",{staticClass:"connect-line"}),e("div",{staticClass:"label-container"},[t._v("完成訂單")])])])},ut=[],pt={props:{stepper:{type:Number,required:!0}}},mt=pt,ht=(a("98a6"),Object(m["a"])(mt,dt,ut,!1,null,null,null)),gt=ht.exports,ft=function(){var t=this,e=t._self._c;return 1===t.stepper?e("div",{staticClass:"cartList-wrapper mt-5 col-md-6"},[!0===t.isProcessing?e("ProcessSpinner"):t._e(),t._l(t.cartListItems,(function(a){return e("div",{key:a.id,staticClass:"cartItem-card",attrs:{id:a.id}},[e("img",{attrs:{src:a.image,alt:""}}),e("div",{staticClass:"cartItem-card-info"},[e("div",{staticClass:"cartItem-card-info-name mt-3"},[t._v(t._s(a.name))]),e("div",{staticClass:"cartItem-card-info-quantity"},[e("div",{staticClass:"minus-btn",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.subQuantity(a)}}},[t._v(" - ")]),e("div",{staticClass:"quantity"},[t._v(t._s(a.CartItem.quantity))]),e("div",{staticClass:"plus-btn",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.addQuantity(a)}}},[t._v(" + ")])]),e("div",{staticClass:"cartItem-card-info-price"},[t._v(" NT$ "+t._s(a.CartItem.quantity*a.price)+" ")])]),e("button",{staticClass:"btn cartListItem-delete",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.deleteCartitem(a)}}},[e("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])])}))],2):t._e()},vt=[],bt={components:{ProcessSpinner:W["a"]},props:{cartListItems:{type:Array,required:!0},stepper:{type:Number,required:!0}},data(){return{cartItems:this.cartListItems,isProcessing:!1}},methods:{async addQuantity(t){try{this.isProcessing=!0;const e=await P["a"].addCartItem({id:t.CartItem.id}),{data:a}=e;if("error"===a.status)throw new Error(a.message);t.CartItem.quantity++,this.isProcessing=!1}catch(e){this.isProcessing=!1,j["a"].fire({icon:"error",title:"無法增加商品數量，請稍後再試"})}},async subQuantity(t){try{if(t.CartItem.quantity>1){this.isProcessing=!0;const e=await P["a"].subCartItem({id:t.CartItem.id}),{data:a}=e;if("error"===a.status)throw new Error(a.message);t.CartItem.quantity--,this.isProcessing=!1}}catch(e){this.isProcessing=!1,j["a"].fire({icon:"error",title:"無法減少商品數量，請稍後再試"})}},async deleteCartitem(t){try{this.isProcessing=!0;const e=await P["a"].deleteCartItem({id:t.CartItem.id}),{data:a}=e;if("error"===e.status)throw new Error(a.message);this.$emit("delete-cartItem",t),document.getElementById(t.id).remove(),this.isProcessing=!1}catch(e){this.isProcessing=!1,j["a"].fire({icon:"error",title:"無法刪除本項商品，請稍後再試"})}}}},Ct=bt,_t=(a("f9a9"),Object(m["a"])(Ct,ft,vt,!1,null,null,null)),yt=_t.exports,wt=function(){var t=this,e=t._self._c;return t.stepper<3?e("div",{staticClass:"subtotal-wrapper mt-5 col-md-6 p-0"},[e("div",{staticClass:"wrapper-title"},[t._v("訂單摘要")]),e("div",{staticClass:"info-wrapper"},[e("div",{staticClass:"list-item"},[e("div",{staticClass:"item-title"},[t._v("商品金額")]),e("div",{staticClass:"price"},[t._v("NT$ "+t._s(t.totalPrice))])]),t._m(0)]),e("div",{staticClass:"total-price"},[e("div",{staticClass:"title"},[t._v("結帳金額")]),e("div",{staticClass:"price"},[t._v("NT$ "+t._s(t.totalPrice))])]),1===t.stepper?e("div",{staticClass:"next-btn",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handleStepper(t.stepper)}}},[t._v(" 前往結帳 ")]):t._e(),2===t.stepper?e("div",{staticClass:"prev-btn",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.cancelStepper(t.stepper)}}},[t._v(" 返回購物車 ")]):t._e()]):t._e()},kt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"list-item"},[e("div",{staticClass:"item-title"},[t._v("運費")]),e("div",{staticClass:"price"},[t._v("免運")])])}],Pt={data(){return{stepper:this.initialStepper}},props:{initialStepper:{type:Number,required:!0},totalPrice:{type:Number,required:!0}},methods:{handleStepper(t){this.stepper<3&&(this.stepper++,t=this.stepper),this.$emit("click-step-btn",t)},cancelStepper(t){this.stepper>1&&(this.stepper--,t=this.stepper),this.$emit("click-step-btn",t)}},watch:{initialStepper:function(){this.stepper=this.initialStepper}}},It=Pt,xt=Object(m["a"])(It,wt,kt,!1,null,null,null),St=xt.exports,Ot=function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-md-6"},[e("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function({invalid:a,handleSubmit:s}){return[2===t.stepper?e("form",{staticClass:"form-wrapper",on:{submit:function(e){return e.preventDefault(),s(t.submitForm)}}},[!0===t.isProcessing?e("ProcessSpinner"):t._e(),e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function({errors:a,classes:s}){return[e("div",{staticClass:"form-group mt-3"},[e("label",{attrs:{for:"name"}},[t._v("姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",class:s,attrs:{id:"name",type:"text",name:"姓名",placeholder:"請輸入收件人姓名"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),e("span",{staticClass:"invalid-feedback d-flex"},[t._v(t._s(a[0]))])])]}}],null,!0)}),e("ValidationProvider",{attrs:{rules:"required|email",name:"email"},scopedSlots:t._u([{key:"default",fn:function({errors:a,classes:s}){return[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"email"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",class:s,attrs:{type:"email",id:"email",name:"Email",placeholder:"請輸入 Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),e("span",{staticClass:"invalid-feedback d-flex"},[t._v(t._s(a[0]))])])]}}],null,!0)}),e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function({errors:a,classes:s}){return[e("div",{staticClass:"form-group mt-3"},[e("label",{attrs:{for:"phone"}},[t._v("電話")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"form-control",class:s,attrs:{id:"phone",type:"number",name:"電話",placeholder:"請輸入電話號碼"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}}),e("span",{staticClass:"invalid-feedback d-flex"},[t._v(t._s(a[0]))])])]}}],null,!0)}),e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function({errors:a,classes:s}){return[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"address"}},[t._v("收件地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"form-control",class:s,attrs:{type:"text",id:"address",name:"收件地址",placeholder:"請輸入地址"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}}),e("span",{staticClass:"invalid-feedback d-flex"},[t._v(t._s(a[0]))])])]}}],null,!0)}),e("input",{attrs:{type:"hidden",name:"userId"},domProps:{value:t.userId}}),e("input",{attrs:{type:"hidden",name:"cartId"},domProps:{value:t.cartId}}),e("input",{attrs:{type:"hidden",name:"amount"},domProps:{value:t.amount}}),e("input",{attrs:{type:"hidden",name:"shipping_status",value:"0"}}),e("input",{attrs:{type:"hidden",name:"payment_status",value:"0"}}),e("button",{staticClass:"next-btn",class:{disabled:a},attrs:{type:"submit"}},[t._v("送出資料")])],1):t._e()]}}])}),e("div",{staticClass:"container",attrs:{id:"app"}})],1)},qt=[];const Lt=()=>localStorage.getItem("token");var jt={getOrders(){return j["b"].get("/orders",{headers:{Authorization:"Bearer "+Lt()}})},postOrder({userId:t,cartId:e,name:a,email:s,phone:r,address:i,amount:n,shipping_status:o,payment_status:c}){return j["b"].post("/orders",{userId:t,cartId:e,name:a,email:s,phone:r,address:i,amount:n,shipping_status:o,payment_status:c},{headers:{Authorization:"Bearer "+Lt()}})},getPayment({orderId:t}){return j["b"].get(`/orders/${t}/payment`,{headers:{Authorization:"Bearer "+Lt()}})},cancelOrder({orderId:t}){return j["b"].put(`/orders/${t}/cancel`,{orderId:t},{headers:{Authorization:"Bearer "+Lt()}})}},$t={components:{ProcessSpinner:W["a"]},props:{initialStepper:{type:Number,required:!0},totalPrice:{type:Number,required:!0}},data(){return{userId:"",name:"",email:"",phone:"",address:"",shipping_status:0,payment_status:0,cartId:"",amount:this.totalPrice,stepper:this.initialStepper,orderId:"",isProcessing:!1}},created(){this.cartId=localStorage.getItem("cartId"),this.userId=this.currentUser.id},methods:{handleStepper(t){this.stepper=this.initialStepper,this.stepper<3&&(this.stepper++,t=this.stepper),this.$emit("click-step-btn",t)},async submitForm(){try{this.isProcessing=!0;const t=await jt.postOrder({userId:this.userId,name:this.name,email:this.email,phone:this.phone,address:this.address,cartId:this.cartId,amount:this.amount,shipping_status:this.shipping_status,payment_status:this.payment_status}),{data:e}=t;if("error"===t.status)throw new Error(e.message);this.stepper++,this.$emit("click-step-btn",this.stepper),this.$bus.$emit("cartUpdate",{cart:[]}),this.isProcessing=!1}catch(t){this.isProcessing=!1,j["a"].fire({icon:"error",title:"..."})}}},watch:{initialStepper:function(){this.stepper=this.initialStepper},totalPrice:function(){this.amount=this.totalPrice},currentUser:function(){this.userId=this.currentUser.id}},computed:{...Object($["b"])(["currentUser","isAuthenticated"])}},Et=$t,Nt=Object(m["a"])(Et,Ot,qt,!1,null,null,null),Ut=Nt.exports,At={components:{Stepper:gt,CartListItem:yt,SubTotal:St,CheckoutForm:Ut,Spinner:H["a"]},data(){return{cartId:0,carts:[],cartItems:[],stepper:1,orderId:"",isLoading:!0}},created(){this.fetchCartListItems()},methods:{async fetchCartListItems(){try{const t=localStorage.getItem("cartId"),e=await P["a"].getCart({cartId:t}),{data:a}=e;if("error"===e.status)throw new Error(a.message);this.$bus.$emit("cartUpdate",{cart:a.carts}),this.carts=a.carts,this.carts.forEach(t=>{this.cartItems.push(t.cartProducts)}),this.isLoading=!1}catch(t){this.isLoading=!1,!1===this.isAuthenticated?j["a"].fire({icon:"error",title:"請先登入使用者"}):j["a"].fire({icon:"error",title:"無法取得購物車資料，請稍後再試"})}},handleStepBtn(t){this.stepper=t},async handleSubmit(){try{const t=await jt.postOrder();console.log("response",t)}catch(e){console.log(e)}this.stepper>1&&this.stepper++;const t=JSON.stringify({name:this.name,email:this.email,phone:this.phone,address:this.address});console.log("data",t)},getOrderId(t){this.orderId=t},handleDelete(t){const e=this.carts.filter(e=>e.cartProducts!==t);this.carts=e,this.$bus.$emit("cartUpdate",{cart:e})}},computed:{totalPrice(){let t=0;return this.cartItems.forEach(e=>{t+=e.CartItem.quantity*e.price}),t},...Object($["b"])(["currentUser","isAuthenticated"])}},Tt=At,Dt=Object(m["a"])(Tt,ct,lt,!1,null,null,null),Bt=Dt.exports,Mt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"order-container"},[e("div",{staticClass:"orderList-wrapper mt-5"},[!0===t.isLoading?e("Spinner"):t._l(t.orders,(function(t){return e("OrderListCard",{key:t.id,attrs:{"initial-order":t,id:t.id}})}))],2)])},Ft=[],Vt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"orderListCard"},[!0===t.isProcessing?e("ProcessSpinner"):t._e(),e("table",{staticClass:"orderList-table"},[t._m(0),e("tbody",[e("tr",[e("td",{staticClass:"orderList-table-item-id"},[t._v(t._s(t.order.id))]),e("td",{staticClass:"orderList-table-item-date"},[t._v(t._s(t.order.createdAt))]),e("td",{staticClass:"orderList-table-item-amount"},[t._v("NT$ "+t._s(t.order.amount))]),e("td",{staticClass:"orderList-table-item-payment"},["0"===t.order.payment_status?e("GetPaymentModal",{attrs:{"initial-order":t.order}}):"1"===t.order.payment_status?e("div",[t._v("付款完成")]):e("div",[t._v("已取消")])],1),e("td",{staticClass:"orderList-table-item-shipment"},["0"===t.order.shipping_status?e("div",[t._v("未配送")]):"1"===t.order.shipping_status?e("div",[t._v("配送中")]):e("div",[t._v("已取消")])]),e("td",{staticClass:"orderList-table-item-others"},[e("OrderModal",{attrs:{"initial-order":t.order}})],1),e("td",{staticClass:"orderList-table-item-cancel"},["-1"===t.order.payment_status?e("div",[t._v("已取消")]):e("div",{staticClass:"orderList-table-item-cancel-btn",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.cancelOrder.apply(null,arguments)}}},[t._v(" 取消 ")])])])])]),e("div",{staticClass:"info-table mt-2"},[e("table",[e("tbody",[!1===t.isSwitching?e("div",{staticClass:"detail-show-btn",staticStyle:{display:"block"}},[e("img",{staticClass:"detailSwitch",attrs:{src:"//d.ecimg.tw/img/ecvip/img2/icon_list1.gif",alt:"+"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSwitch.apply(null,arguments)}}}),e("div",{staticClass:"detail-wrapper"},[t._v("看明細")])]):e("div",{staticClass:"detail-hidden-btn"},[e("img",{staticClass:"detailSwitch",attrs:{src:"//d.ecimg.tw/img/ecvip/img2/icon_list0.gif",alt:"-"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSwitch.apply(null,arguments)}}}),e("div",{staticClass:"detail-wrapper"},[e("table",t._l(t.order.orderProducts,(function(a){return e("tbody",{key:a.id},[e("tr",[e("td",{staticClass:"detail-wrapper-item-image"},[e("img",{attrs:{src:a.image,alt:""}})]),e("td",{staticClass:"detail-wrapper-item-name"},[t._v(" "+t._s(a.name)+" ")]),e("td",{staticClass:"detail-wrapper-item-quantity"},[t._v(" "+t._s(a.OrderItem.quantity)+" 件 ")]),e("td",{staticClass:"detail-wrapper-item-price"},[t._v(" NT$ "+t._s(a.OrderItem.quantity*a.price)+" ")])])])})),0)])])])])]),e("hr")],1)},zt=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("訂單編號")]),e("th",[t._v("日期")]),e("th",[t._v("總金額")]),e("th",[t._v("付款狀態")]),e("th",[t._v("配送狀態")]),e("th",[t._v("其他")]),e("th",[t._v("訂單取消")])])])}],Qt=function(){var t=this,e=t._self._c;return e("div",[e("button",{staticClass:"orderList-table-item-others-btn-show",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#orderModal"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showModal.apply(null,arguments)}}},[t._v(" 詳 ")]),e("div",{staticClass:"modal fade",attrs:{id:"orderModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h2",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(" 訂單編號 "+t._s(t.order.id)+" ")]),e("button",{staticClass:"btn orderModal-close",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.closeModal.apply(null,arguments)}}},[e("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("h4",[t._v("其他資訊如下：")]),e("h5",[t._v("收貨人姓名："+t._s(t.order.name))]),e("h5",[t._v("收貨人電話："+t._s(t.order.phone))]),e("h5",[t._v("收貨人地址："+t._s(t.order.address))])])])])])])},Rt=[],Gt=a("7c2b"),Ht=a.n(Gt),Wt={props:{initialOrder:{type:Object,required:!0}},data(){return{order:this.initialOrder}},methods:{showModal(t){this.modal=new Ht.a(t.target.nextElementSibling),this.modal.show()},closeModal(){this.modal.hide()}}},Jt=Wt,Kt=Object(m["a"])(Jt,Qt,Rt,!1,null,null,null),Xt=Kt.exports,Yt=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("button",{staticClass:"orderList-table-item-payment-btn",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#paymentModal"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.fetchPayment.apply(null,arguments)}}},[t._v(" 前往付款 ")]),e("div",{staticClass:"modal fade",attrs:{id:"paymentModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[t._m(0),e("div",{staticClass:"modal-body"},[e("h5",[t._v("訂單編號："+t._s(t.order.id))]),e("h5",[t._v("訂單金額： NT$ "+t._s(t.order.amount))]),e("h5",[t._v("收件人： "+t._s(t.order.name))])]),e("div",{staticClass:"modal-footer"},[e("form",{attrs:{action:t.tradeInfo.PayGateWay,method:"POST"}},[e("input",{attrs:{type:"text",name:"MerchantID",hidden:""},domProps:{value:t.tradeInfo.MerchantID}}),e("input",{attrs:{type:"text",name:"TradeInfo",hidden:""},domProps:{value:t.tradeInfo.TradeInfo}}),e("input",{attrs:{type:"text",name:"TradeSha",hidden:""},domProps:{value:t.tradeInfo.TradeSha}}),e("input",{attrs:{type:"text",name:"Version",hidden:""},domProps:{value:t.tradeInfo.version}}),e("div",[e("button",{staticClass:"prev-btn",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.closeModal.apply(null,arguments)}}},[t._v(" 取消 ")]),e("button",{staticClass:"next-btn",attrs:{type:"submit"}},[t._v("確認")])])])])])])])])])},Zt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-header"},[e("h3",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("確認訂單")]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})])}],te={props:{initialOrder:{type:Object,required:!0}},data(){return{order:this.initialOrder,orderId:this.initialOrder.id,modal:null,tradeInfo:[],timeStamp:{}}},methods:{async fetchPayment(t){try{const e=await jt.getPayment({orderId:this.orderId}),{data:a}=e;this.tradeInfo=a.tradeInfo,this.modal=new Ht.a(t.target.nextElementSibling),this.modal.show()}catch(e){console.log(e)}},showModal(t){this.modal=new Ht.a(t.target.nextElementSibling),this.modal.show()},closeModal(){this.modal.hide()}}},ee=te,ae=Object(m["a"])(ee,Yt,Zt,!1,null,null,null),se=ae.exports,re={components:{OrderModal:Xt,GetPaymentModal:se,ProcessSpinner:W["a"]},props:{initialOrder:{type:Object,required:!0}},data(){return{order:this.initialOrder,orderId:this.initialOrder.id,modal:null,tradeInfo:[],isProcessing:!1,isSwitching:!1}},created(){},methods:{async cancelOrder(){try{this.isProcessing=!0;const t=await jt.cancelOrder({orderId:this.orderId});if("error"===t.status)throw new Error(t.data.message);this.order.shipping_status=-1,this.order.payment_status=-1,this.isProcessing=!1}catch(t){this.isProcessing=!1,j["a"].fire({icon:"error",title:"無法取消訂單，請稍後再試"})}},handleSwitch(){this.isSwitching=!this.isSwitching}}},ie=re,ne=(a("1a54"),Object(m["a"])(ie,Vt,zt,!1,null,null,null)),oe=ne.exports,ce={components:{OrderListCard:oe,Spinner:H["a"]},data(){return{orders:[],isLoading:!0}},created(){this.fetchOrders()},methods:{async fetchOrders(){try{const t=await jt.getOrders(),{data:e}=t;if("error"===t.status)throw new Error(e.message);this.orders=e.orders,this.isLoading=!1}catch(t){j["a"].fire({icon:"error",title:"無法取得訂單資料，請稍後再試"}),this.isLoading=!1}}}},le=ce,de=(a("3e4f"),Object(m["a"])(le,Mt,Ft,!1,null,null,null)),ue=de.exports,pe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-container container"},[!0===t.isLoading?e("Spinner"):e("div",{staticClass:"products-wrapper row"},[e("div",{staticClass:"side-wrapper col-md-3"},[e("div",{staticClass:"title bg-light text-left pl-3"},[t._v("商品分類")]),e("ul",{staticClass:"list-group d-md-block d-none"},[e("li",{staticClass:"list-item d-md-block d-none mt-3",class:{active:""===t.categoryId},on:{click:function(e){return t.changeCategroyId()}}},[e("i",{staticClass:"fas fa-angle-left"}),e("span",[t._v(" 全部商品")])]),t._l(t.categories,(function(a){return e("li",{key:a.id,staticClass:"list-item",class:{active:t.categoryId===a.id},on:{click:function(e){return t.changeCategroyId(a.id)}}},[e("i",{staticClass:"fas fa-angle-left"}),t._v(" "+t._s(a.name)+" ")])}))],2),e("div",{staticClass:"select-wrapper text-left d-md-none pl-3 mt-3 mb-3"},[e("select",{staticClass:"border-0",attrs:{name:"",id:""},on:{change:t.handleChange}},[e("option",{attrs:{value:""}},[t._v("全部商品")]),t._l(t.categories,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])}))],2)])]),e("div",{staticClass:"main-wrapper col-md-9"},[e("div",{staticClass:"title"},[t._v(" 找到"+t._s(t.number)+'件"'+t._s(""+t.$route.query.key)+'"的商品 ')]),e("div",{staticClass:"cards-wrapper"},t._l(t.products,(function(a){return e("div",{key:a.id,staticClass:"product-card"},[e("router-link",{attrs:{to:{name:"product",params:{id:a.id}}}},[e("div",{staticClass:"product-img"},[e("img",{attrs:{src:a.image,alt:""}})]),e("div",{staticClass:"text-left pl-1"},[e("div",{staticClass:"product-name"},[t._v(t._s(a.name))]),e("span",{staticClass:"product-category"},[e("i",{staticClass:"fa fa-tag",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(a.Category.name))]),e("div",{staticClass:"product-price"},[t._v("NT$ "+t._s(a.price))]),e("div",{staticClass:"product-detail"},[e("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}}),t._v(" 查看明細")]),e("button",{staticClass:"btn p-2 text-white",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.addToCart(a.id)}}},[t._v("加入購物車")])])])],1)})),0)])])],1)},me=[],he={components:{Spinner:H["a"]},data(){return{products:[],categories:[],categoryId:"",ClickProductId:"",number:"",isLoading:!0}},mounted(){this.fetchProducts(),this.fetchCategories()},beforeRouteUpdate(t,e,a){a(),this.fetchProducts()},methods:{async fetchProducts(){try{this.isLoading=!1;const t=await k["a"].getProducts({categoryId:this.categoryId,page:"",keyword:this.$route.query.key}),{data:e}=t;if("error"===t.status)throw new Error(e.message);this.products=t.data.totalProducts,this.number=t.data.totalProducts.length,this.isLoading=!1}catch(t){j["a"].fire({icon:"error",title:"無法取得產品資料，請稍後再試"}),this.isLoading=!1}},async fetchCategories(){try{const t=await k["a"].getCategories();this.categories=t.data.categories}catch(t){console.log(t)}},async changeCategroyId(t){this.categoryId=t||"",await this.fetchProducts()},async addToCart(t){try{this.ClickProductId=t;const e=await P["a"].postCart({productId:t,quantity:1,cartId:this.cartId}),{data:a}=e;if(this.$bus.$emit("cartUpdate",{cart:a.cart}),200===e.status&&j["a"].fire({icon:"success",title:"成功加入購物車"}),"error"===e.status)throw new Error(a.message);await this.getCart(),this.isProcessing=!1}catch(e){this.isProcessing=!1,j["a"].fire({icon:"error",title:"無法加入購物車，請稍後再試"})}},async getCart(){try{const t=await P["a"].getCart(),{data:e}=t;if("error"===t.status)throw new Error(e.message);this.$bus.$emit("cartUpdate",{cart:e.carts})}catch(t){console.log(t)}},async handleChange(t){this.isLoading=!0,this.categoryId=t.target.value,await this.fetchProducts({queryPage:"",queryCategoryId:this.categoryId}),this.isLoading=!1}}},ge=he,fe=Object(m["a"])(ge,pe,me,!1,null,null,null),ve=fe.exports,be=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dashboard-container"},[e("AdminNavbar"),e("div",{staticClass:"dashboard-wrapper mt-1"},[e("div",{staticClass:"sidebar-wrapper"},[e("div",{staticClass:"list-group"},[e("router-link",{staticClass:"list-group-item",attrs:{to:"/admin/categories"}},[e("i",{staticClass:"fa fa-list-alt",attrs:{"aria-hidden":"true"}}),t._v(" 分類列表")]),e("router-link",{staticClass:"list-group-item",attrs:{to:"/admin/products"}},[e("i",{staticClass:"fa fa-cutlery",attrs:{"aria-hidden":"true"}}),t._v(" 產品列表")]),e("router-link",{staticClass:"list-group-item",attrs:{to:"/admin/orders"}},[e("i",{staticClass:"fa fa-file-text",attrs:{"aria-hidden":"true"}}),t._v(" 訂單列表")])],1)]),e("div",{staticClass:"content-wrapper"},[e("router-view")],1)]),e("Footer")],1)},Ce=[],_e=function(){var t=this,e=t._self._c;return e("div",{staticClass:"admin-nav-wrapper"},[!0===t.isLoading?e("Spinner"):e("div",[e("div",{staticClass:"admin-navbar"},[e("div",{staticClass:"nav-brand"},[e("router-link",{attrs:{to:"/"}},[e("img",{staticClass:"logo-img",attrs:{src:"https://imgpile.com/images/biexQR.png",alt:""}})])],1),e("div",{staticClass:"item-group d-flex"},[e("div",{staticClass:"item-group-title"},[t._v("管理者後台")]),t.isAuthenticated?e("button",{staticClass:"btn-login",on:{click:t.logout}},[t._v(" 登出 ")]):e("button",{staticClass:"btn-login"},[e("router-link",{staticClass:"routerLink",attrs:{to:"/signin"}},[t._v(" 我要登入 ")])],1)])])])],1)},ye=[],we={components:{Spinner:H["a"]},data(){return{isLoading:!0}},created(){this.isLoading=!1},methods:{logout(){this.$store.commit("revokeAuthentication"),this.$router.push("/signin")}},computed:{...Object($["b"])(["currentUser","isAuthenticated"])}},ke=we,Pe=(a("c66c"),Object(m["a"])(ke,_e,ye,!1,null,null,null)),Ie=Pe.exports,xe=function(){var t=this;t._self._c;return t._m(0)},Se=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"footer text-white pt-3"},[e("ul",{staticClass:"d-flex justify-content-center align-items-center"},[e("li",[e("i",{staticClass:"fa-brands fa-linkedin mx-3"})]),e("li",[e("i",{staticClass:"fa-brands fa-facebook mx-3"})]),e("li",[e("i",{staticClass:"fa-brands fa-github mx-3"})])]),e("p",{staticClass:"text-white"},[t._v("© 2023 / 本網站僅供練習，非實際商業用途")])])}],Oe=(a("3558"),{}),qe=Object(m["a"])(Oe,xe,Se,!1,null,null,null),Le=qe.exports,je={components:{AdminNavbar:Ie,Footer:Le}},$e=je,Ee=(a("dfe8"),Object(m["a"])($e,be,Ce,!1,null,null,null)),Ne=Ee.exports,Ue=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container d-flex justify-content-center align-items-center min-vh-100"},[e("div",{staticClass:"not-found p-5"},[e("h1",{staticClass:"text-secondary"},[t._v("404 此頁面不存在")]),e("div",{staticClass:"link d-flex justify-content-around mt-5"},[e("router-link",{attrs:{to:"/"}},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"}},[e("i",{staticClass:"fa fa-arrow-left",attrs:{"aria-hidden":"true"}}),t._v(" 回到首頁")])]),e("router-link",{attrs:{to:"/products"}},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button"}},[t._v("前往購物 "),e("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}})])])],1)])])},Ae=[],Te=(a("999c"),{}),De=Object(m["a"])(Te,Ue,Ae,!1,null,null,null),Be=De.exports,Me=function(){var t=this,e=t._self._c;return e("div",[e("Navbar"),e("router-view"),e("Footer")],1)},Fe=[],Ve=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nav-wrapper"},[!0===t.isLoading?e("Spinner"):e("div",[e("div",{staticClass:"navbar"},[e("div",{staticClass:"nav-brand"},[e("router-link",{attrs:{to:"/"}},[e("img",{staticClass:"logo-img",attrs:{src:"https://imgpile.com/images/biexQR.png",alt:""}})])],1),e("div",{staticClass:"search-bar collapse",attrs:{id:"search-bar"}},[e("div",{staticClass:"input-wrapper d-flex"},[e("div",{staticClass:"input-icon"},[e("i",{staticClass:"fas fa-search"})]),e("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.keyword,expression:"keyword",modifiers:{lazy:!0}}],staticClass:"form-control search-input",attrs:{type:"text",placeholder:"請輸入關鍵字"},domProps:{value:t.keyword},on:{change:[function(e){t.keyword=e.target.value},t.searchKeyword]}}),e("button",{staticClass:"form-control btn-search"},[t._v("搜尋")]),e("button",{staticClass:"close pl-3",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.closeCollapse("search-bar")}}},[e("i",{staticClass:"fa fa-times"})])]),e("div",{staticClass:"bottom",on:{click:function(e){return t.closeCollapse("search-bar")}}})]),e("div",{staticClass:"item-group d-flex"},[t.isAuthenticated?e("button",{staticClass:"btn-login",on:{click:t.logout}},[t._v(" 登出 ")]):e("button",{staticClass:"btn-login"},[e("router-link",{staticClass:"routerLink",attrs:{to:"/signin"}},[t._v(" 登入 ")])],1),e("button",{staticClass:"search-icon",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#search-bar"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showCollapse("search-bar")}}},[e("i",{staticClass:"fas fa-search fa-lg"},[t._v("50%")])]),e("button",{directives:[{name:"show",rawName:"v-show",value:t.isAuthenticated,expression:"isAuthenticated"}]},[e("router-link",{attrs:{to:"/order"}},[e("i",{staticClass:"fa fa-file-text fa-lg"},[t._v("50%")])])],1),e("div",{staticClass:"cart-icon"},[e("button",[e("router-link",{attrs:{to:"/cart"}},[e("i",{staticClass:"fa fa-shopping-cart fa-lg"},[t._v("80%")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.carts.length,expression:"carts.length"}],staticClass:"cart-item-wrapper"},[e("span",{staticClass:"item-quantity"},[t._v(t._s(t.carts.length))])])])],1)]),e("label",{staticClass:"navbar-toggle-label",attrs:{"data-bs-toggle":"collapse","data-bs-target":"#navbar-expand"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showCollapse("navbar-expand")}}},[e("span",{staticClass:"hamburger"})])])]),e("div",{staticClass:"topList"},[e("router-link",{staticClass:"router-link mr-3",attrs:{to:"/asked_questions"}},[t._v("問&答")]),e("router-link",{staticClass:"router-link mr-3",class:{active:""===t.categoryId&&"products"===this.$route.name},attrs:{to:"/products"}},[t._v("所有商品")]),t._l(t.categories,(function(a){return e("div",{key:a.id},[e("router-link",{class:{active:t.categoryId===a.id},attrs:{to:"/products?categoryId="+a.id}},[t._v(t._s(a.name))])],1)}))],2),e("div",{staticClass:"navbar-expand-collapse collapse",attrs:{id:"navbar-expand"}},[e("div",{staticClass:"expand-wrapper"},[e("div",{staticClass:"expand-item-wrapper"},[e("router-link",{staticClass:"expand-item",attrs:{to:"/"}},[t._v(" 首頁 ")])],1),e("div",{staticClass:"expand-item-wrapper"},[e("router-link",{staticClass:"expand-item",attrs:{to:"/asked_questions"}},[t._v("問&答")])],1),t.isAuthenticated?e("div",{staticClass:"expand-item-wrapper logout"},[e("a",{staticClass:"expand-item",attrs:{href:""},on:{click:t.logout}},[t._v(" 登出 ")])]):e("div",{staticClass:"expand-item-wrapper login"},[e("router-link",{staticClass:"expand-item",attrs:{to:"/signin"}},[t._v(" 登入/註冊 ")])],1),e("div",{staticClass:"category-group"},[e("div",{staticClass:"expand-item-wrapper",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handleChecked.apply(null,arguments)}}},[e("router-link",{staticClass:"expand-item",attrs:{to:"/products"}},[t._v(" 所有分類 "),e("i",{staticClass:"fa fa-angle-right"})])],1),e("div",{staticClass:"category-list"},t._l(t.categories,(function(a){return e("div",{key:a.id,staticClass:"expand-item-wrapper"},[e("router-link",{staticClass:"expand-item",attrs:{to:"/products?categoryId="+a.id}},[t._v(" "+t._s(a.name)+" "),e("i",{staticClass:"fa fa-angle-right"})])],1)})),0)])]),e("div",{staticClass:"expand-bottom",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.closeCollapse.apply(null,arguments)}}})])])],1)},ze=[],Qe={components:{Spinner:H["a"]},data(){return{keyword:"",collapse:null,categories:[],carts:[],isLoading:!0,categoryId:""}},created(){this.categoryId=Number(this.$route.query.categoryId)||"",this.$bus.$on("cartUpdate",t=>{this.carts=t.cart})},mounted(){this.fetchCategories()},methods:{async fetchCategories(){try{const t=await k["a"].getCategories();this.categories=t.data.categories,this.fetchCart()}catch(t){console.log(t)}},async fetchCart(){try{this.isLoading=!1;const t=await P["a"].getCart(),{data:e}=t;if("error"===t.status)throw new Error(e.message);this.isLoading=!1,this.$bus.$emit("cartUpdate",{cart:e.carts})}catch(t){console.log(t)}},handleChecked(){!0===this.isChecked?this.isChecked=!1:this.isChecked=!0},logout(){this.$store.commit("revokeAuthentication"),this.$router.push("/signin")},searchKeyword(){this.$router.push("/search?key="+this.keyword)},showCollapse(t){this.collapse=new n["Collapse"](document.getElementById(t)),this.collapse.show()},closeCollapse(){this.collapse.hide()}},computed:{...Object($["b"])(["currentUser","isAuthenticated"])},watch:{$route(){this.collapse&&this.collapse.hide(),this.categoryId=Number(this.$route.query.categoryId)||"",this.keyword=""}}},Re=Qe,Ge=(a("38c7"),Object(m["a"])(Re,Ve,ze,!1,null,null,null)),He=Ge.exports,We={components:{Navbar:He,Footer:Le}},Je=We,Ke=Object(m["a"])(Je,Me,Fe,!1,null,null,null),Xe=Ke.exports,Ye=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-wrapper mt-5"},[e("div",{staticClass:"row container m-auto"},[e("div",{staticClass:"col-lg-3 sidebar mt-5 mt-md-0"},[e("h2",{staticClass:"bg-light text-left pl-3"},[t._v("問與答")]),e("ul",{staticClass:"mt-3 d-none d-lg-block"},t._l(t.data,(function(a){return e("li",{key:a.id,staticClass:"list-item mb-3",class:{active:a.id===t.secectedId},on:{click:function(e){return t.handleSelected(a.id)}}},[t._v(t._s(a.title))])})),0),e("div",{staticClass:"select-wrapper mt-3 d-lg-none text-left mb-3"},[e("select",{staticClass:"border-0",attrs:{name:"",id:""},on:{change:t.handleChange}},t._l(t.data,(function(a){return e("option",{key:a.id,class:{active:a.id===t.secectedId},domProps:{value:a.id}},[t._v(t._s(a.title))])})),0)])]),e("div",{staticClass:"col-lg-9"},[t._m(0),e("ul",{staticClass:"mt-3"},t._l(t.selectedData.questions,(function(a){return e("li",{key:a.id,staticClass:"question-title text-left mb-3",on:{click:function(e){return t.goToQuestion(a.id)}}},[t._v("Q"+t._s(a.id)+"."+t._s(a.title))])})),0),e("hr"),e("div",t._l(t.selectedData.questions,(function(a){return e("div",{key:a.id,staticClass:"text-left",attrs:{id:a.id}},[e("h6",{staticClass:"question-title mt-3"},[t._v("Q"+t._s(a.id)+"."+t._s(a.title))]),e("p",{staticClass:"question-answer mt-3"},[t._v(t._s(a.answer))]),e("p",{staticClass:"text-danger mt-3"},[t._v(t._s(a.alert))]),e("hr")])})),0)])])])},Ze=[function(){var t=this,e=t._self._c;return e("div",[e("img",{attrs:{src:"https://media.istockphoto.com/id/1337475990/zh/%E7%85%A7%E7%89%87/q-and-a-question-and-answer-shot-form-on-wooden-block.jpg?s=612x612&w=0&k=20&c=NxC0VWqfwLo8XLi093j8WqI8Tk5j-uOzOiVs_nwdYuo=",alt:""}})])}];const ta=[{id:1,title:"購物常見問題",questions:[{id:1,title:"購物流程說明",answer:"選擇商品＞＞加入購物車＞＞前往結帳＞＞填寫收件資訊＞＞完成購物",alert:"※ 提醒您，商品加入購物車但未結帳前，並無保留商品庫存功能，商品庫存分配將以結帳順序為依據。"},{id:2,title:"如何查詢目前訂單的處理情況?",answer:"請您先「會員中心」後至「訂單紀錄」，即可查詢該訂單的處理狀態。",alert:""},{id:3,title:"如何修改、加訂或合併訂單",answer:"為避免影響商品庫存及避免帳務錯誤，請恕我們無法為您再將訂單『修改』或『加購』或『合併』訂單商品。",alert:"※提醒您，如遇訂單狀態已完成出貨無法攔截時，請恕無法協助取消訂單。"}]},{id:2,title:"配送取貨問題",questions:[{id:1,title:"可選擇的配送方式有那些?",answer:"全店商品將以『黑貓宅急便』宅配方式寄出，宅配範圍目前限於台灣本島地區；外島地區將以郵局配送。",alert:"※ 其他提醒：當商品出貨後，若未於通知期限內完成取貨或拒收，將會產生未取件記錄，如達3次以上(含)，未來將無法再使用該付款方式下單。"},{id:2,title:"請問運費如何計算?",answer:"以下為常態免運費標準，實際請依官網行銷活動公告為依據。\n                   1.單筆購物滿1200元；未達免運條件，將酌收60元物流費。",alert:""},{id:3,title:"台灣外島地區可以寄送嗎?",answer:"外島地區將以郵局海運配送，預計3-7日內配達，而送達時間會因天氣狀況、船隻班次而有變動的可能性。",alert:""}]},{id:3,title:"退換貨及退款",questions:[{id:1,title:"如何辦理退換貨?",answer:"根據財政部令「電子發票實施作業要點」，於消費開立之「二聯電子發票」、「三聯電子發票」，不主動寄送，本網亦會將發票號碼上傳至政府平台。\n                \n                不論單件或組合價商品，保留商品仍享優惠，未達免運門檻運費不倒扣。\n                若仍有需要的商品，請您重新下單訂購，以節省貨物因來回寄送所秏費的時間。\n                每張訂單僅提供乙次免費退貨服務，若於7日內需加退商品，請自行負擔寄送運費；為避免爭議發生，請確實驗收商品後再進行退貨。\n                \n                ",alert:""},{id:2,title:"退款方式及退款時間",answer:"退貨作業時間： 退貨包裏完成寄送後，約7-8個工作天完成退款作業。\n                \n                退款方式： 退刷至原信用卡帳戶中。由於完成退刷後，銀行間的作業處理約需7~14天，也因個人信用卡的結帳週期不同而影響退刷款項完成時間（負項可能會列在下期的帳單上）。關於「店家已刷退後的作業時間」，可洽詢您的信用卡發卡行。",alert:""}]},{id:4,title:"發票常見問題",questions:[{id:1,title:"什麼是「電子發票」？商品收到了，發票怎麼沒一起附上？",answer:"根據財政部令「電子發票實施作業要點」，於消費開立之「二聯電子發票」、「三聯電子發票」，不主動寄送，本網亦會將發票號碼上傳至政府平台。\n\n目前本網消費開立之「三聯電子發票」為會員載具，尚未開放共通性載具選項。",alert:""},{id:2,title:"發票可以指定日期或開立其它品名嗎?",answer:"因發票採用系統化自動開立，因此發票上的品名將依實際訂購的商品名稱開立，請恕無法指定開立其它品名或指定開立日期。",alert:""},{id:3,title:"購物發票，是否可開立為多張發票?",answer:"因發票採用系統化自動開立，故一筆訂單對應一張發票，請恕無法分別開立多張。如有分別開立需求，請將商品分別下單。",alert:""}]}];var ea={data(){return{data:ta,secectedId:1,selectedData:{}}},created(){this.selectedData=ta.filter(t=>t.id===this.secectedId)[0]},methods:{handleSelected(t){this.secectedId=t,this.selectedData=ta.filter(t=>t.id===this.secectedId)[0]},handleChange(t){this.secectedId=t.target.value,this.selectedData=this.selectedData=ta.filter(e=>e.id===Number(t.target.value))[0]},goToQuestion(t){var e;const a=null===(e=d()("#"+t).offset())||void 0===e?void 0:e.top;d()("html, body").animate({scrollTop:a},200)}}},aa=ea,sa=(a("f700"),Object(m["a"])(aa,Ye,Ze,!1,null,null,null)),ra=sa.exports;s["default"].use(_["a"]);const ia=(t,e,a)=>{const s=st.state.currentUser;s&&"admin"!==s.role?a("/not-found"):a()},na=[{path:"/",name:"front",component:Xe,children:[{path:"/",name:"home",component:T},{path:"/products",name:"products",component:Y},{path:"/products/:id",name:"product",component:()=>a.e("chunk-a0931d9e").then(a.bind(null,"d2f1"))},{path:"/signin",name:"sign-in",component:ot},{path:"/cart",name:"cart",component:Bt},{path:"/order",name:"order",component:ue},{path:"/search",name:"search",component:ve},{path:"/asked_questions",name:"asked_questions",component:ra}]},{path:"/admin",name:"admin-dashboard",component:Ne,beforeEnter:ia,children:[{path:"/admin/products",name:"admin-products",component:()=>a.e("chunk-47c69631").then(a.bind(null,"8bf7")),beforeEnter:ia},{path:"/admin/categories",name:"admin-categories",component:()=>a.e("chunk-338b93fe").then(a.bind(null,"4e5c")),beforeEnter:ia},{path:"/admin/orders",name:"admin-orders",component:()=>a.e("chunk-f4f0610c").then(a.bind(null,"f626")),beforeEnter:ia}]},{path:"/about",name:"about",component:()=>a.e("about").then(a.bind(null,"d7a9"))},{path:"*",name:"not-found",component:Be}],oa=new _["a"]({routes:na});oa.beforeEach(async(t,e,a)=>{const s=localStorage.getItem("token");let r=!1;s&&(r=await st.dispatch("fetchCurrentUser"));const i=["sign-in","products","product","search","home"];r||i.includes(t.name)?r&&"sign-in"===t.name?a("/products"):a():a("/signin")});var ca=oa,la=a("7212"),da=a.n(la);s["default"].prototype.$bus=new s["default"];var ua=a("f5af"),pa=a.n(ua),ma=(a("e829"),a("7bb1")),ha=a("4c93");a("a7a3");Object(ma["c"])({classes:{valid:"is-valid",invalid:"is-invalid"}}),Object(ma["d"])("required",{...ha["b"],message:"{_field_}不能為空"}),Object(ma["d"])("email",{...ha["a"],message:"必須是有效的電子郵件地址"}),Object(ma["d"])("confirmed",{params:["target"],validate(t,{target:e}){return t===e},message:"兩次密碼輸入不同，請重新確認"}),s["default"].component("ValidationProvider",ma["b"]),s["default"].component("ValidationObserver",ma["a"]),function(t,e,a){var s,r=t.getElementsByTagName(e)[0];t.getElementById(a)||(s=t.createElement(e),s.id=a,s.src="//connect.facebook.net/zh_TW/sdk.js",r.parentNode.insertBefore(s,r))}(document,"script","facebook-jssdk"),s["default"].use(da.a),s["default"].config.productionTip=!1,new s["default"]({created(){pa.a.init({})},router:ca,store:st,render:t=>t(C)}).$mount("#app")},6308:function(t,e,a){"use strict";a("c553")},"7a93":function(t,e,a){},"7bba":function(t,e,a){},"881a":function(t,e,a){},"98a6":function(t,e,a){"use strict";a("b517")},"999c":function(t,e,a){"use strict";a("881a")},a0b4:function(t,e,a){"use strict";a("b6f9")},a3bf:function(t,e,a){"use strict";a("1e79")},afd9:function(t,e,a){},b1db:function(t,e,a){"use strict";a("c8be")},b3e5:function(t,e,a){},b517:function(t,e,a){},b682:function(t,e,a){},b6f9:function(t,e,a){},b841:function(t,e,a){t.exports=a.p+"img/completed.65e253be.png"},c09c:function(t,e,a){"use strict";var s=function(){var t=this;t._self._c;return t._m(0)},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"process-loader-area"},[e("div",{staticClass:"process-bottom"}),e("div",{staticClass:"process-loader"},[t._v(" 123 ")])])}],i=(a("a3bf"),a("2877")),n={},o=Object(i["a"])(n,s,r,!1,null,null,null);e["a"]=o.exports},c553:function(t,e,a){},c66c:function(t,e,a){"use strict";a("7bba")},c6b5:function(t,e,a){},c799:function(t,e,a){},c8be:function(t,e,a){},cc17:function(t,e,a){"use strict";var s=a("2fa3");const r=()=>localStorage.getItem("token");e["a"]={postCart({productId:t,quantity:e,cartId:a}){return s["b"].post("/carts",{productId:t,quantity:e,cartId:a},{headers:{Authorization:"Bearer "+r()}})},getCart(){return s["b"].get("/carts",{headers:{Authorization:"Bearer "+r()}})},addCartItem({id:t}){return s["b"].post(`/carts/cartItem/${t}/add`,{headers:{Authorization:"Bearer "+r()}})},subCartItem({id:t}){return s["b"].post(`/carts/cartItem/${t}/sub`,{headers:{Authorization:"Bearer "+r()}})},deleteCartItem({id:t}){return s["b"].delete(`/carts/cartItem/${t}/delete`,{headers:{Authorization:"Bearer "+r()}})}}},d771:function(t,e,a){"use strict";a("e7cc")},dd45:function(t,e,a){t.exports=a.p+"img/2021_Facebook_icon.svg.3ddb61bd.webp"},de2a:function(t,e,a){},dfe8:function(t,e,a){"use strict";a("55c0")},e7cc:function(t,e,a){},e8b5:function(t,e,a){},ee21:function(t,e,a){"use strict";var s=a("2fa3");e["a"]={getProducts({page:t,categoryId:e,keyword:a}){const r=new URLSearchParams({page:t,categoryId:e,keyword:a||""});return s["b"].get("/products?"+r.toString())},getProduct({productId:t}){return s["b"].get("/products/"+t)},getCategories(){return s["b"].get("/categories")}}},f6f6:function(t,e,a){"use strict";a("c799")},f700:function(t,e,a){"use strict";a("e8b5")},f9a9:function(t,e,a){"use strict";a("b3e5")},fcae:function(t,e,a){}});
//# sourceMappingURL=app.d14acc1e.js.map